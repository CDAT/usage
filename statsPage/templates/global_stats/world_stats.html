{% extends "base.html" %}

{% block content %}
{% load staticfiles %}
<script type="text/javascript" src="{% static 'js/global_stats/world_stats.js' %}"></script>
<!-- this helps for learning: http://app.rawgraphs.io -->
<!-- this to: http://rawgraphs.io -->
<!-- http://d3-generator.com -->

<script type="text/javascript">
var truth;
var reg_truth;
var all_it;
var la_region;
function hide_regions(elegance) {
    la_region = elegance;
    var fantastic = document.getElementsByClassName('hide_regions' + elegance);
    if(reg_truth != 1){
        for(var i = 0; i != fantastic.length; ++i){
            fantastic[i].style.visibility = "visible"; 
            reg_truth=1;
        }
    }
    else if(reg_truth == 1){
        for(var i = 0; i != fantastic.length; ++i){
            fantastic[i].style.visibility = "hidden"; 
            reg_truth=0;
        }
    }
}

function should_hide(abundant) {
    all_it = abundant;
    var brightness = document.getElementsByClassName('hide_cities' + abundant);
    if(truth != 1){
        for(var i = 0; i != brightness.length; ++i){
            brightness[i].style.visibility = "visible"; 
            truth=1;
        }
    }
    else if(truth == 1){
        for(var i = 0; i != brightness.length; ++i){
            brightness[i].style.visibility = "hidden"; 
            truth=0;
        }
    }
}

$(document).ready(function() {
    $('.initlaclass').hide()
    $('.huge_regions').on('click', function(){
        $('.hide_regions' + la_region).show()
    });
    $('.big_cities').on('click', function(){
        $('.hide_cities' + all_it).show()
    });
});
</script>

<div class="container">
    <div id="feature-carousel" class="carousel slide" data-ride="carousel">
        <div class="carousel-inner" role="listbox">
            <div class="item active">
                <center><h2>Dendogram of all the countries that have used our software.
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp</h2></center>
            </div>
            <div class="item">
                <center><h2>On the right, you'll see which countries have used our software along with how many times it's been used in that country.</h2></center>
            </div>
        </div>
     </div>
</div>

<div class="container">
    <center>
        <svg width="1000" height="1500" xmlns="http://www.w3.org/2000/svg" version="1.1">
            <g transform="translate(40,0)">
                <g class="node" transform="translate(0,750)">
                    <circle r="4.5" style="fill: rgb(238, 238, 238); stroke: rgb(153, 153, 153); stroke-width: 1px;"></circle>
                    <text dx="-8" dy="3" style="font-size: 11px; font-family: Arial, Helvetica; text-anchor: end;"></text>
                </g>
                {% for bet in checked %}
                    <path class="link" d="M0,750C230,750 230,{{bet.1}} 230,{{bet.1}}" style="fill: none; stroke: rgb({{bet.3}}, {{bet.4}}, {{bet.5}}); stroke-width: 1px;"></path>
                    <g class="huge_regions" onclick='hide_regions("{{bet.1}}")' class="node" transform="translate(230,{{bet.1}})">
                        <circle r="7.5" style="fill: rgb(238, 238, 238); stroke: rgb(153, 153, 153); stroke-width: 1px;"></circle>
                        <text dx="8" dy="3" style="font-size: 12px; font-family: Arial, Helvetica; text-anchor: start;">{{bet.0}}, {{bet.6}}</text>
                    </g>
                    {% for each in bet.2 %}
                        <path class="hide_regions{{bet.1}} initlaclass" class="link" d="M230,{{bet.1}}C243.875,{{bet.1}} 343.75,{{each.2}} 458,{{each.2}}" style="fill: none; stroke: rgb({{bet.3}}, {{bet.4}}, {{bet.5}}); stroke-width: 1px;"></path>
                        <g class="hide_regions{{bet.1}} initlaclass" class="node" transform="translate(458, {{each.2}})">
                            <circle class="big_cities hide_regions{{bet.1}}" onclick='should_hide("{{each.2}}")' r="{{each.8}}" style="fill: rgb(238, 238, 238); stroke: rgb(153, 153, 153); stroke-width: 1px;"></circle>
                            <text dx="8" dy="3" style="font-size: 12px; font-family: Arial, Helvetica; text-anchor: start;">{{each.0}}, {{each.1}}</text>
                        </g>
                        {% for city in each.3 %}
                            <path class="hide_cities{{each.2}} initlaclass hide_regions{{bet.1}}" class="link" d="M458.75,{{each.2}}C515.625,{{city.1}} 515.625,{{city.1}} 687.5,{{city.1}}" style="fill: none; stroke: rgb({{bet.3}}, {{bet.4}}, {{bet.5}}); stroke-width: 1px;"></path>
                            <g class="hide_cities{{each.2}} initlaclass hide_regions{{bet.1}}" class="node" transform="translate(687.5,{{city.1}})">
                                <circle r="4.5" style="fill: rgb(238, 238, 238); stroke: rgb(153, 153, 153); stroke-width: 1px;"></circle>
                                <text dx="8" dy="3" style="font-size: 11px; font-family: Arial, Helvetica; text-anchor: start;">{{city.0}}, {{city.2}}</text>
                            </g>
                        {% endfor %}
                    {% endfor %}
                {% endfor %}
            </g>
        </svg>
    </center>
</div>

{% endblock content %}


