{% extends "base.html" %}

{% block content %}
{% load staticfiles %}
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

<table class="table">
    <thead>
        <tr>
            <th>Country</th>
            <th>Count</th>
        </tr>
    </thead>
    <tbody>
        {% for bet in checked %}
            {% for each in bet.2 %}
                <tr>
                    <!--td>{{ each.0 }}</td-->
                    <td>
                        {{each.0}}<br>
                        <table border="3" cellpadding="3" cellspacing="3">
                           <td>2nd Table</td>
                           <td>2nd Table</td>
                           <tr>
                           <td>2nd Table</td>
                           <td>2nd Table</td>
                           </tr>
                           </table>
                    <td>{{ each.1 }}</td>
                </tr>
            {% endfor %}
        {% endfor %}
    </tbody>
</table>

            

<!--table class="columns"-->
<!--table>
    <col width="500">
    <col width="500">
    <tr>
        <td><div id="country_table_div"></div></td>
        <td><div id="cities_table_div"></div></td>
    </tr>
</table-->

<script type="text/javascript">
  google.charts.load('current', {'packages':['table']});
  google.charts.setOnLoadCallback(drawTable);
  google.charts.setOnLoadCallback(drawCitiesTable);

  var call = {{checked|safe}};
  var countries = [];
  for(var i=0; i < call.length; i++){
    for(var k=0; k < call[i][2].length; k++){
        var nested = [];
        nested.push(call[i][2][k][0]);
        nested.push(call[i][2][k][1]);
        countries.push(nested);
    }
  }

  var cities = [];
  for(var i=0; i < call.length; i++){
    for(var k=0; k < call[i][2][0][3].length; k++){
       nested = [];
       nested.push(call[i][2][0][3][k][0]); 
       nested.push(call[i][2][0][3][k][2]); 
       cities.push(nested);
    }
  }

  function drawTable() {
    var data = new google.visualization.DataTable();
    data.addColumn('string', 'Country');
    data.addColumn('number', '# of Unique Users');
    data.addRows(countries);
    var table = new google.visualization.Table(document.getElementById('country_table_div'));
    table.draw(data, {showRowNumber: true, width: '50%', height: '50%'});
  }

  function drawCitiesTable() {
    var data = new google.visualization.DataTable();
    data.addColumn('string', 'Cities');
    data.addColumn('number', '# of Unique Users');
    data.addRows(cities);
    var table = new google.visualization.Table(document.getElementById('cities_table_div'));
    table.draw(data, {showRowNumber: true, width: '50%', height: '50%'});
  }
</script>

{% endblock content %}

